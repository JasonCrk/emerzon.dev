---
import { Icon } from 'astro-icon/components'

import ProjectHead from './heads/ProjectHead.astro'

import Title from '../components/Title/Title.astro'
import ToggleTheme from '../components/ToggleTheme/ToggleTheme.astro'
import TranslateMenuButton from '../components/TranslateMenuButton/TranslateMenuButton.astro'
import ContactFooter from '../sections/ContactFooter/ContactFooter.astro'

import { getLangFromUrl, useTranslations } from '../i18n/utils'

interface Props {
    title: string
}

const { title } = Astro.props

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)
---

<html class="dark" lang={lang}>
    <head>
        <ProjectHead title={title} />
    </head>
    <body>
        <header>
            <TranslateMenuButton />
            <ToggleTheme />
        </header>

        <main>
            <div class="main-content">
                <section class="projects-section">
                    <div>
                        <a class="go-back" href={`/${lang}`}>
                            <span style="display: none;">.</span>
                            <Icon name="hugeicons:arrow-left-01" />
                        </a>
                        <Title marginBottom="0">{t('projects.title')}</Title>
                    </div>

                    <article class="projects">
                        <slot />
                    </article>
                </section>

                <ContactFooter />
            </div>
        </main>

        <style is:global>
            @import '../styles/normalize.css';
            @import '../styles/global.css';
            @import '../styles/variables.css';

            header {
                top: 20px;
                left: 0px;
                width: 100%;
                padding-inline: 30px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                position: fixed;
                z-index: 100;
            }

            main {
                display: flex;
                align-items: center;
                flex-direction: column;

                .main-content {
                    width: 100%;
                    max-width: 1000px;
                }
            }

            .projects-section {
                margin-top: 80px;

                & > div {
                    display: flex;
                    align-items: center;
                    gap: 14px;
                    margin-bottom: 25px;
                }
            }

            .go-back {
                padding: 6px;
                font-size: 1.4rem;
                display: inline-flex;
                border-radius: 100%;
                border-width: 1px;
                border-style: solid;
                transition:
                    background-color var(--theme-time-transition),
                    border-color var(--theme-time-transition);
            }

            .projects {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }

            :is(html.light) {
                .go-back {
                    background-color: var(--col-light-80);
                    border-color: var(--col-gray-100);
                    color: var(--col-gray-700);

                    &:hover {
                        background-color: var(--col-light-100);
                    }
                }
            }

            :is(html.dark) {
                .go-back {
                    background-color: var(--col-dark-850);
                    border-color: var(--col-dark-300);

                    &:hover {
                        background-color: var(--col-dark-300);
                    }
                }
            }
        </style>
    </body>
</html>
